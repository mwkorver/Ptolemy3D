<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>pTolemy3D Demo Page</title>
        <link type="text/css" href="css/south-street/jquery-ui-1.7.2.custom.css" rel="stylesheet" />
        <link href="css/screen.css" rel="stylesheet" type="text/css" media="screen" />

        <script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.7.2.custom.min.js"></script>
        <script type="text/javascript" src="ptolemy.js"></script>
        <script type="text/javascript">
            $(function(){
                // Accordion
                $("#accordion").accordion({
                    header: "h3",
                    clearStyle: true,
                    autoHeight: false
                });

                // Tabs. Immediately select the just added tab.
                $("#tabs").tabs({
                    spinner: 'Retrieving data...',
                    add: function(event, ui) { $("#tabs").tabs('select', '#' + ui.panel.id); },
                    fx: { height: 'show', opacity: 'show' }
                });

                // NOTE: The dialog plugin is avoided due problems shown on
                // top of the applet.
                // Dialog
                /*
                $('#dialog').dialog({
                    autoOpen: false,
                    width: 400,
                    buttons: {
                        "Ok": function() {
                            $(this).dialog("close");
                        }
                    }
                });
                // Dialog Link
                $('#dialog_link').click(function(){
                    $('#dialog').dialog('open');
                    return false;
                });
                 */

                // Execute free code
                $("#run_freecode").click(function(){
                    var freecode = $("#freecode").val();
                    eval(freecode);
                });

                // Resize the applet and code window
                $("#freecode").resizable();
                $(".map3dcontainer").resizable();

                // Set the initial content of text area
                reset();

                // Check if Java plugin is available
                if(checkJava()==false){
                    $(".map3dcontainer").css("background-color","silver");
                }
            });

            /**
             * Checks if Java VM is installed.
             */
            function checkJava()
            {
                var javaEnabled = navigator.javaEnabled();
                if(!javaEnabled){
                    alert("Java VM not installed !!!\npTolemy3D requires Java plugin installed to be executed.");
                }
                return javaEnabled;
            }


            /*
             * Reset. Set the initial content of textarea.
             */
            function reset(){
                ptolemyStart();
                $('#freecode').load('./code/reset.js','',function (responseText, textStatus, XMLHttpRequest) {
                    $('#freecode').val(responseText);
                });
            }
        </script>
    </head>
    <body>

        <!-- HEADER -->
        <div class="header">
            <img style="float:right;" src="images/pTolemy3D_logo.png" width="144" height="48" alt="Logo" longdesc="pTolemy3D Logo" />
            <span class="title">pTolemy3D</span> - <span class="subtitle">Demo site</span>
            <hr color="#339933" size="1px"/>
        </div>

        <!-- MAIN CONTAINER -->
        <div class="maincontainer">

            <!-- 3D VIEWER -->
            <div class="map3dcontainer">
                <applet code="com.sun.opengl.util.JOGLAppletLauncher"
                        align="center" width="100%" height="100%"
                        id="pTolemy3D" Name="pTolemy3DViewer"
                        codebase="./applet/"
                        archive="./jogl.jar,./gluegen-rt.jar,./plugin.jar,./ptolemy-refactor-0.1.1.jar,./citygml4j-0.2.1.jar,./jaxb-api.jar,./jaxb-impl.jar" MAYSCRIPT>
                    <param name="subapplet.classname" VALUE="org.ptolemy3d.Ptolemy3DApplet">
                    <param name="subapplet.displayname" VALUE="pTolemy3D Viewer">
                    <param name="progressbar" value="true">
                    <param name="noddraw.check" value="true">
                    <param name="noddraw.check.silent" value="true">
                    <param name="cache_archive" VALUE="jogl.jar,gluegen-rt.jar,plugin.jar,ptolemy3d-1.0-SNAPSHOT.jar,ptolemy3dplugin-1.0-SNAPSHOT.jar">
                    <param name="cache_archive_ex" VALUE="jogl.jar;preload,gluegen-rt.jar;preload,plugin.jar;preload,ptolemy3d-1.0-SNAPSHOT.jar;preload,ptolemy3dplugin-1.0-SNAPSHOT.jar;preload">

                    <param name="Orientation" value="0,0,500000,0,0">
                    <param name="CenterX" value="0">
                    <param name="CenterY" value="0">
                    <param name="DisplayRatio" value="1">

                    <param name="Server" value="demo.spatialcloud.com">
                    <param name="NumMapDataServers" value="1">
                    <param name="MapDataSvr1" value="ptolemy3d.s3.amazonaws.com">
                    <param name="MapJp2Store1" value="/demo-data/jp2/">
                    <param name="MapDemStore1" value="/demo-data/dem/">
                    <param name="MUrlAppend1" value="&streamID=class64">
                    <param name="MServerKey1" value="">

                    <param name="TileColor" value="47,47,86">
                    <param name="Area" value="00">
                    <param name="Horizon" value="10000">
                    <param name="FlightFrameDelay" value="200">
                    <param name="TIN" value="0">
                    <param name="FollowDEM" value="0">
                    <param name="BackgroundColor" value="0,0,0">

                    <param name="NumLayers" value="5">

                    <param name="LayerWidth_1" value="52428800">
                    <param name="LayerDEM_1" value="9">
                    <param name="LayerMin_1" value="400000">
                    <param name="LayerMax_1" value="10000000">
                    <param name="LayerDivider_1" value="0">

                    <param name="LayerWidth_2" value="6553600">
                    <param name="LayerDEM_2" value="9">
                    <param name="LayerMin_2" value="200000">
                    <param name="LayerMax_2" value="500000">
                    <param name="LayerDivider_2" value="0">

                    <param name="LayerWidth_3" value="819200">
                    <param name="LayerDEM_3" value="9">
                    <param name="LayerMin_3" value="100000">
                    <param name="LayerMax_3" value="250000">
                    <param name="LayerDivider_3" value="0">

                    <param name="LayerWidth_4" value="102400">
                    <param name="LayerDEM_4" value="9">
                    <param name="LayerMin_4" value="20000">
                    <param name="LayerMax_4" value="100000">
                    <param name="LayerDivider_4" value="0">

                    <param name="LayerWidth_5" value="12800">
                    <param name="LayerDEM_5" value="9">
                    <param name="LayerMin_5" value="0">
                    <param name="LayerMax_5" value="10000">
                    <param name="LayerDivider_5" value="0">

                    <param name="NumPlugins" value="0">
                        
<!-- We create plugins once ptolemy system is started
                    <param name="PluginType_1" value="org.ptolemy3d.plugin.IconPlugin">
                    <param name="PluginParam_1" value="/Ptolemy_test/new.png,40,0">

                    <param name="PluginType_2" value="org.ptolemy3d.plugin.CityGmlPlugin">
                    <param name="PluginParam_2" value="100000,http://localhost:8080/openbd/CFML/pseudoWFS/wfs.cfm?SERVICE=wfs&amp;REQUEST=GetFeature&amp;bbox=-180,-90,180,90">
-->
                </applet>
            </div>

            <!-- API AND CODE WINDOWS -->
            <table width="100%" border="0">
                <tr>
                    <td width="250px" valign="top">
                        <!-- Every link in the accordion loads a different JS file -->

                        <div id="accordion">
                            <div>
                                <h3><a href="#">Camera:</a></h3>
                                <div>
                                    <ul>
                                        <li><a href="#" onClick="$('#freecode').load('./code/simpleFlight.js','',function (responseText, textStatus, XMLHttpRequest) {$('#freecode').val(responseText);});">Simple flight.</a></li>
                                        <li><a href="#" onclick="$('#freecode').load('./code/complexFlight.js','',function (responseText, textStatus, XMLHttpRequest) {$('#freecode').val(responseText);});">Complex flight.</a></li>
                                        <li><a href="#" onclick="$('#freecode').load('./code/positioning.js','',function (responseText, textStatus, XMLHttpRequest) {$('#freecode').val(responseText);});">Positioning.</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div>
                                <h3><a href="#">Options:</a></h3>
                                <div>
                                    <ul>
                                        <li><a href="#" onclick="$('#freecode').load('./code/cameraFlightType.js','',function (responseText, textStatus, XMLHttpRequest) {$('#freecode').val(responseText);});">Camera flight type.</a></li>
                                        <li><a href="#" onclick="$('#freecode').load('./code/terrainOptions.js','',function (responseText, textStatus, XMLHttpRequest) {$('#freecode').val(responseText);});">Terrain options.</a></li>
                                        <li><a href="#" onclick="$('#freecode').load('./code/flightMode.js','',function (responseText, textStatus, XMLHttpRequest) {$('#freecode').val(responseText);});">Terrain flight mode.</a></li>
                                        <li><a href="#" onclick="$('#freecode').load('./code/clickMode.js','',function (responseText, textStatus, XMLHttpRequest) {$('#freecode').val(responseText);});">Click mode.</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div>
                                <h3><a href="#" id="dialog_link">Viewer Controls:</a></h3>
                                <div id="dialog" title="Controls">
                                    You can control pTolemy3D viewer using:<br/>
                                    <strong>Keyboard:</strong>
                                    <ul>
                                        <li>a - zoom in</li>
                                        <li>z - zoom out</li>
                                        <li>s - zoom in</li>
                                        <li>x - zoom out</li>
                                        <li>d - rotate left</li>
                                        <li>f - rotate right</li>
                                        <li>r - tilt down</li>
                                        <li>c - tilt up</li>
                                        <li>left arrow - spin globe left</li>
                                        <li>right arrow - spin globe right</li>
                                        <li>up arrow - spin globe up</li>
                                        <li>down arrow - spin globe down</li>
                                    </ul>
                                    <strong>Mouse:</strong>
                                    <ul>
                                        <li>drag - moves camera</li>
                                    </ul>

                                </div>
                            </div>
                        </div>

                    </td>
                    <td valign="top">

                        <div id="tabs">
                            <ul>
                                <li><a href="#tabs-code">Code Area</a></li>
                            </ul>
                            <div id="tabs-code">
                                <table border="0">
                                    <tr><td><textarea id="freecode" cols="120" rows="14"></textarea></td></tr>
                                    <tr><td><button id="run_freecode">Run...</button><button id="reset_ptolemy" onclick="reset();">Reset...</button></td></tr>
                                </table>
                            </div>
                        </div>

                    </td>
                </tr>
            </table>
        </div>

        <!-- FOOTER -->
        <div class="footer">
            <hr color="#339933" size="1px"/>
            <p>pTolemy3D Team</p>
        </div>

    </body>
</html>


